<template>
	<!-- #ifdef APP -->
	<scroll-view  style="flex: 1;">
	<!-- #endif -->
		<view class="page">
			<!-- é¡µé¢æ ‡é¢˜ -->
			<view class="page-header">
				<text class="page-title">Collapse æŠ˜å é¢æ¿</text>
				<text class="page-desc">å¯ä»¥æŠ˜å /å±•å¼€çš„å†…å®¹åŒºåŸŸ</text>
			</view>

			<!-- åŸºç¡€ç”¨æ³• -->
			<view class="section">
				<text class="section-title">åŸºç¡€ç”¨æ³•</text>
				<view class="demo-content">
					<k-collapse title="è¿™æ˜¯ä¸€ä¸ªæŠ˜å é¢æ¿" :expanded="basicExpanded" @change="onBasicChange">
						<text class="collapse-text">è¿™é‡Œæ˜¯æŠ˜å é¢æ¿çš„å†…å®¹ã€‚å¯ä»¥æ”¾ç½®ä»»æ„çš„å†…å®¹ï¼ŒåŒ…æ‹¬æ–‡å­—ã€å›¾ç‰‡ã€å…¶ä»–ç»„ä»¶ç­‰ã€‚å½“ç‚¹å‡»æ ‡é¢˜æ—¶ï¼Œå†…å®¹ä¼šå±•å¼€æˆ–æ”¶èµ·ã€‚</text>
					</k-collapse>
				</view>
			</view>

			<!-- é»˜è®¤å±•å¼€ -->
			<view class="section">
				<text class="section-title">é»˜è®¤å±•å¼€</text>
				<text class="demo-desc">é€šè¿‡ expanded å±æ€§æ§åˆ¶é»˜è®¤å±•å¼€çŠ¶æ€</text>
				<view class="demo-content">
					<k-collapse title="é»˜è®¤å±•å¼€çš„é¢æ¿" :expanded="true">
						<text class="collapse-text">è¿™ä¸ªé¢æ¿é»˜è®¤æ˜¯å±•å¼€çŠ¶æ€ã€‚ä½ å¯ä»¥é€šè¿‡è®¾ç½® expanded å±æ€§ä¸º true æ¥å®ç°é»˜è®¤å±•å¼€ã€‚</text>
					</k-collapse>
				</view>
			</view>

			<!-- ç¦ç”¨çŠ¶æ€ -->
			<view class="section">
				<text class="section-title">ç¦ç”¨çŠ¶æ€</text>
				<text class="demo-desc">é€šè¿‡ disabled å±æ€§ç¦ç”¨æŠ˜å é¢æ¿</text>
				<view class="demo-content">
					<k-collapse title="ç¦ç”¨çš„æŠ˜å é¢æ¿" :disabled="true">
						<text class="collapse-text">è¿™ä¸ªé¢æ¿è¢«ç¦ç”¨äº†ï¼Œæ— æ³•ç‚¹å‡»å±•å¼€æˆ–æ”¶èµ·ã€‚</text>
					</k-collapse>
				</view>
			</view>

			<!-- è‡ªå®šä¹‰å›¾æ ‡ä½ç½® -->
			<view class="section">
				<text class="section-title">è‡ªå®šä¹‰å›¾æ ‡ä½ç½®</text>
				<text class="demo-desc">é€šè¿‡ icon-position å±æ€§è®¾ç½®å›¾æ ‡ä½ç½®</text>
				<view class="demo-content">
					<k-collapse title="å›¾æ ‡åœ¨å·¦ä¾§" icon-position="left" :expanded="leftIconExpanded" @change="onLeftIconChange">
						<text class="collapse-text">è¿™ä¸ªé¢æ¿çš„å›¾æ ‡ä½ç½®åœ¨å·¦ä¾§ã€‚</text>
					</k-collapse>
					<view class="demo-gap"></view>
					<k-collapse title="å›¾æ ‡åœ¨å³ä¾§" icon-position="right" :expanded="rightIconExpanded" @change="onRightIconChange">
						<text class="collapse-text">è¿™ä¸ªé¢æ¿çš„å›¾æ ‡ä½ç½®åœ¨å³ä¾§ï¼ˆé»˜è®¤ï¼‰ã€‚</text>
					</k-collapse>
				</view>
			</view>

			<!-- è‡ªå®šä¹‰æ ‡é¢˜ -->
			<view class="section">
				<text class="section-title">è‡ªå®šä¹‰æ ‡é¢˜</text>
				<text class="demo-desc">é€šè¿‡ title æ’æ§½è‡ªå®šä¹‰æ ‡é¢˜å†…å®¹</text>
				<view class="demo-content">
					<k-collapse :expanded="customTitleExpanded" @change="onCustomTitleChange">
						<template #title>
							<view class="custom-title">
								<text class="custom-title-text">ğŸ‰ è‡ªå®šä¹‰æ ‡é¢˜</text>
								<view class="custom-badge">
									<text class="custom-badge-text">NEW</text>
								</view>
							</view>
						</template>
						<text class="collapse-text">è¿™é‡Œä½¿ç”¨äº†è‡ªå®šä¹‰çš„æ ‡é¢˜æ’æ§½ï¼Œå¯ä»¥æ·»åŠ å›¾æ ‡ã€å¾½ç« ç­‰å…ƒç´ ã€‚</text>
					</k-collapse>
				</view>
			</view>

			<!-- å¤šä¸ªé¢æ¿ -->
			<view class="section">
				<text class="section-title">å¤šä¸ªé¢æ¿</text>
				<text class="demo-desc">å¤šä¸ªæŠ˜å é¢æ¿ç»„åˆä½¿ç”¨</text>
				<view class="demo-content">
					<k-collapse 
						v-for="(item, index) in collapseList" 
						:key="index"
						:title="item.title"
						:expanded="item.expanded"
						@change="onCollapseChange(index, $event)"
						:class="{ 'collapse-item': true, 'collapse-item-last': index === collapseList.length - 1 }"
					>
						<text class="collapse-text">{{ item.content }}</text>
					</k-collapse>
				</view>
			</view>
		</view>
	<!-- #ifdef APP -->
	</scroll-view>
	<!-- #endif -->
</template>

<script setup lang="uts">
	import { ref } from 'vue'

	// åŸºç¡€ç”¨æ³•çŠ¶æ€
	const basicExpanded = ref(false)
	const onBasicChange = (expanded: boolean) => {
		basicExpanded.value = expanded
		console.log('åŸºç¡€é¢æ¿çŠ¶æ€:', expanded)
	}

	// å›¾æ ‡ä½ç½®çŠ¶æ€
	const leftIconExpanded = ref(false)
	const rightIconExpanded = ref(false)
	const onLeftIconChange = (expanded: boolean) => {
		leftIconExpanded.value = expanded
	}
	const onRightIconChange = (expanded: boolean) => {
		rightIconExpanded.value = expanded
	}

	// è‡ªå®šä¹‰æ ‡é¢˜çŠ¶æ€
	const customTitleExpanded = ref(false)
	const onCustomTitleChange = (expanded: boolean) => {
		customTitleExpanded.value = expanded
	}

	// å¤šä¸ªé¢æ¿æ•°æ®
	type CollapseItem = {
		title: string
		content: string
		expanded: boolean
	}

	const collapseList = ref<CollapseItem[]>([
		{
			title: 'é¢æ¿ 1',
			content: 'è¿™æ˜¯ç¬¬ä¸€ä¸ªé¢æ¿çš„å†…å®¹ï¼ŒåŒ…å«ä¸€äº›åŸºç¡€ä¿¡æ¯å’Œè¯´æ˜æ–‡å­—ã€‚',
			expanded: false
		},
		{
			title: 'é¢æ¿ 2',
			content: 'è¿™æ˜¯ç¬¬äºŒä¸ªé¢æ¿çš„å†…å®¹ï¼Œå±•ç¤ºäº†æ›´å¤šè¯¦ç»†çš„åŠŸèƒ½ä»‹ç»ã€‚',
			expanded: true
		},
		{
			title: 'é¢æ¿ 3',
			content: 'è¿™æ˜¯ç¬¬ä¸‰ä¸ªé¢æ¿çš„å†…å®¹ï¼Œæä¾›äº†é¢å¤–çš„é…ç½®é€‰é¡¹å’Œä½¿ç”¨è¯´æ˜ã€‚',
			expanded: false
		}
	])

	const onCollapseChange = (index: number, expanded: boolean) => {
		collapseList.value[index].expanded = expanded
		console.log(`é¢æ¿ ${index + 1} çŠ¶æ€:`, expanded)
	}

	// åŠ¨ç”»æ—¶é•¿çŠ¶æ€
	const fastExpanded = ref(false)
	const slowExpanded = ref(false)
	const onFastChange = (expanded: boolean) => {
		fastExpanded.value = expanded
	}
	const onSlowChange = (expanded: boolean) => {
		slowExpanded.value = expanded
	}
</script>

<style>
	.demo-content {
		padding: 0;
	}
	.custom-title {
		display: flex;
		align-items: center;
		flex-direction: row;
	}

	.custom-title-text {
		font-size: 16px;
		color: #333;
		font-weight: bold;
		margin-right: 8px;
	}

	.custom-badge {
		background-color: #ff4757;
		border-radius: 10px;
		padding: 2px 6px;
	}

	.custom-badge-text {
		font-size: 10px;
		color: #fff;
		font-weight: bold;
	}
</style>